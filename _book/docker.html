<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Docker | Knowledge Book</title>
  <meta name="description" content="This book contains some of the knowledge I have been acquiring during my PhD studies." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Docker | Knowledge Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book contains some of the knowledge I have been acquiring during my PhD studies." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Docker | Knowledge Book" />
  
  <meta name="twitter:description" content="This book contains some of the knowledge I have been acquiring during my PhD studies." />
  

<meta name="author" content="Sonia GarcÃ­a-Ruiz (s.ruiz@ucl.ac.uk)" />


<meta name="date" content="2022-02-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="aws.html"/>
<link rel="next" href="github.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Sonia's Knowledge Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html"><i class="fa fa-check"></i><b>1</b> Analysis of Genetic Association Studies</a><ul>
<li class="chapter" data-level="1.1" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#useful-linux-commands"><i class="fa fa-check"></i><b>1.1</b> Useful Linux commands</a></li>
<li class="chapter" data-level="1.2" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#useful-r-commands"><i class="fa fa-check"></i><b>1.2</b> Useful R commands</a></li>
<li class="chapter" data-level="1.3" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#variant-calling-from-sequencing-data"><i class="fa fa-check"></i><b>1.3</b> Variant Calling from sequencing data</a><ul>
<li class="chapter" data-level="1.3.1" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#generate-genotype-calls-for-a-single-sample"><i class="fa fa-check"></i><b>1.3.1</b> Generate genotype calls for a single sample</a></li>
<li class="chapter" data-level="1.3.2" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#generating-genotypes-from-multiple-.bam-files"><i class="fa fa-check"></i><b>1.3.2</b> Generating genotypes from multiple .bam files</a></li>
<li class="chapter" data-level="1.3.3" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#performing-initial-qc"><i class="fa fa-check"></i><b>1.3.3</b> Performing initial QC</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#quality-control-for-gwas"><i class="fa fa-check"></i><b>1.4</b> Quality Control for GWAS</a><ul>
<li class="chapter" data-level="1.4.1" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#software-and-datasets"><i class="fa fa-check"></i><b>1.4.1</b> Software and datasets</a></li>
<li class="chapter" data-level="1.4.2" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#checking-the-input-datasets"><i class="fa fa-check"></i><b>1.4.2</b> Checking the input datasets</a></li>
<li class="chapter" data-level="1.4.3" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#binary-ped-files"><i class="fa fa-check"></i><b>1.4.3</b> Binary PED files</a></li>
<li class="chapter" data-level="1.4.4" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#sample-qc"><i class="fa fa-check"></i><b>1.4.4</b> Sample QC</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#testing-for-associations"><i class="fa fa-check"></i><b>1.5</b> Testing for Associations</a><ul>
<li class="chapter" data-level="1.5.1" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#software-and-datasets-1"><i class="fa fa-check"></i><b>1.5.1</b> Software and datasets</a></li>
<li class="chapter" data-level="1.5.2" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#univariate-analyses-of-association"><i class="fa fa-check"></i><b>1.5.2</b> Univariate analyses of association</a></li>
<li class="chapter" data-level="1.5.3" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#multiple-regression-analyses"><i class="fa fa-check"></i><b>1.5.3</b> Multiple regression analyses</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#population-structure-in-gwas"><i class="fa fa-check"></i><b>1.6</b> Population structure in GWAS</a><ul>
<li class="chapter" data-level="1.6.1" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#testing-for-association-under-an-additive-model"><i class="fa fa-check"></i><b>1.6.1</b> Testing for association under an additive model</a></li>
<li class="chapter" data-level="1.6.2" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#performing-multi-dimensional-scaling"><i class="fa fa-check"></i><b>1.6.2</b> Performing multi-dimensional scaling</a></li>
<li class="chapter" data-level="1.6.3" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#testing-for-association-under-an-additive-model-with-adjustment-for-confounding"><i class="fa fa-check"></i><b>1.6.3</b> Testing for association under an additive model with adjustment for confounding</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#phasing-and-imputation"><i class="fa fa-check"></i><b>1.7</b> Phasing and Imputation</a><ul>
<li class="chapter" data-level="1.7.1" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#pre-phasing-and-imputation"><i class="fa fa-check"></i><b>1.7.1</b> Pre-phasing and imputation</a></li>
<li class="chapter" data-level="1.7.2" data-path="analysis-of-genetic-association-studies.html"><a href="analysis-of-genetic-association-studies.html#re-running-our-univariate-analyses-of-association"><i class="fa fa-check"></i><b>1.7.2</b> Re-running our univariate analyses of association</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="eqtl.html"><a href="eqtl.html"><i class="fa fa-check"></i><b>2</b> eQTL</a><ul>
<li class="chapter" data-level="2.1" data-path="eqtl.html"><a href="eqtl.html#maf"><i class="fa fa-check"></i><b>2.1</b> MAF</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="aws.html"><a href="aws.html"><i class="fa fa-check"></i><b>3</b> AWS</a><ul>
<li class="chapter" data-level="3.1" data-path="aws.html"><a href="aws.html#aws-s3"><i class="fa fa-check"></i><b>3.1</b> AWS S3</a><ul>
<li class="chapter" data-level="3.1.1" data-path="aws.html"><a href="aws.html#configure-the-aws-cli-service"><i class="fa fa-check"></i><b>3.1.1</b> Configure the AWS CLI service</a></li>
<li class="chapter" data-level="3.1.2" data-path="aws.html"><a href="aws.html#upload-a-single-file-to-aws-using-aws-cli"><i class="fa fa-check"></i><b>3.1.2</b> Upload a single file to AWS using AWS CLI</a></li>
<li class="chapter" data-level="3.1.3" data-path="aws.html"><a href="aws.html#upload-multiple-files-to-aws-using-aws-cli"><i class="fa fa-check"></i><b>3.1.3</b> Upload multiple files to AWS using AWS CLI</a></li>
<li class="chapter" data-level="3.1.4" data-path="aws.html"><a href="aws.html#download-a-single-file-from-aws-using-aws-cli"><i class="fa fa-check"></i><b>3.1.4</b> Download a single file from AWS using AWS CLI</a></li>
<li class="chapter" data-level="3.1.5" data-path="aws.html"><a href="aws.html#download-multiple-files-from-aws-using-aws-cli"><i class="fa fa-check"></i><b>3.1.5</b> Download multiple files from AWS using AWS CLI</a></li>
<li class="chapter" data-level="3.1.6" data-path="aws.html"><a href="aws.html#requester-payer"><i class="fa fa-check"></i><b>3.1.6</b> Requester payer</a></li>
<li class="chapter" data-level="3.1.7" data-path="aws.html"><a href="aws.html#checking-aws-file-integrity"><i class="fa fa-check"></i><b>3.1.7</b> Checking AWS file integrity</a></li>
<li class="chapter" data-level="3.1.8" data-path="aws.html"><a href="aws.html#creating-a-new-aws-bucket"><i class="fa fa-check"></i><b>3.1.8</b> Creating a new AWS bucket</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="aws.html"><a href="aws.html#aws-ec2"><i class="fa fa-check"></i><b>3.2</b> AWS EC2</a><ul>
<li class="chapter" data-level="3.2.1" data-path="aws.html"><a href="aws.html#generating-an-ec2-instance"><i class="fa fa-check"></i><b>3.2.1</b> Generating an EC2 instance</a></li>
<li class="chapter" data-level="3.2.2" data-path="aws.html"><a href="aws.html#connecting-to-an-ec2-instance"><i class="fa fa-check"></i><b>3.2.2</b> Connecting to an EC2 instance</a></li>
<li class="chapter" data-level="3.2.3" data-path="aws.html"><a href="aws.html#installingrunning-rstudio-on-an-ec2"><i class="fa fa-check"></i><b>3.2.3</b> Installing/Running RStudio on an EC2</a></li>
<li class="chapter" data-level="3.2.4" data-path="aws.html"><a href="aws.html#access-rstudio-using-your-browser"><i class="fa fa-check"></i><b>3.2.4</b> Access RStudio using your browser</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="aws.html"><a href="aws.html#aws-list-of-cloud-services"><i class="fa fa-check"></i><b>3.3</b> AWS List of Cloud Services</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="docker.html"><a href="docker.html"><i class="fa fa-check"></i><b>4</b> Docker</a><ul>
<li class="chapter" data-level="4.1" data-path="docker.html"><a href="docker.html#introduction"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="docker.html"><a href="docker.html#what-is-docker"><i class="fa fa-check"></i><b>4.2</b> What is docker?</a></li>
<li class="chapter" data-level="4.3" data-path="docker.html"><a href="docker.html#images-and-containers"><i class="fa fa-check"></i><b>4.3</b> Images and containers</a></li>
<li class="chapter" data-level="4.4" data-path="docker.html"><a href="docker.html#docker-hub"><i class="fa fa-check"></i><b>4.4</b> Docker Hub</a></li>
<li class="chapter" data-level="4.5" data-path="docker.html"><a href="docker.html#useful-commands"><i class="fa fa-check"></i><b>4.5</b> Useful Commands</a></li>
<li class="chapter" data-level="4.6" data-path="docker.html"><a href="docker.html#docker-coexp-web-application"><i class="fa fa-check"></i><b>4.6</b> Docker &amp; CoExp Web Application</a><ul>
<li class="chapter" data-level="4.6.1" data-path="docker.html"><a href="docker.html#software-requirements"><i class="fa fa-check"></i><b>4.6.1</b> Software requirements</a></li>
<li class="chapter" data-level="4.6.2" data-path="docker.html"><a href="docker.html#download-docker-images-of-coexp"><i class="fa fa-check"></i><b>4.6.2</b> Download Docker images of CoExp</a></li>
<li class="chapter" data-level="4.6.3" data-path="docker.html"><a href="docker.html#use-docker-composer-to-build-the-images"><i class="fa fa-check"></i><b>4.6.3</b> Use Docker-Composer to build the images</a></li>
<li class="chapter" data-level="4.6.4" data-path="docker.html"><a href="docker.html#juans-tutorial"><i class="fa fa-check"></i><b>4.6.4</b> Juan's tutorial</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>5</b> GitHub</a><ul>
<li class="chapter" data-level="5.1" data-path="github.html"><a href="github.html#merge"><i class="fa fa-check"></i><b>5.1</b> Merge</a><ul>
<li class="chapter" data-level="5.1.1" data-path="github.html"><a href="github.html#troubleshooting-pages-of-interest"><i class="fa fa-check"></i><b>5.1.1</b> Troubleshooting pages of interest</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="github.html"><a href="github.html#stash"><i class="fa fa-check"></i><b>5.2</b> Stash</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="globus.html"><a href="globus.html"><i class="fa fa-check"></i><b>6</b> Globus</a><ul>
<li class="chapter" data-level="6.1" data-path="globus.html"><a href="globus.html#useful-commands-1"><i class="fa fa-check"></i><b>6.1</b> Useful Commands</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="machine-learning-concepts.html"><a href="machine-learning-concepts.html"><i class="fa fa-check"></i><b>7</b> Machine Learning Concepts</a><ul>
<li class="chapter" data-level="7.1" data-path="machine-learning-concepts.html"><a href="machine-learning-concepts.html#introduction-1"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="machine-learning-concepts.html"><a href="machine-learning-concepts.html#artificial-intelligence-vs.-machine-learning"><i class="fa fa-check"></i><b>7.2</b> Artificial Intelligence vs. Machine Learning</a></li>
<li class="chapter" data-level="7.3" data-path="machine-learning-concepts.html"><a href="machine-learning-concepts.html#supervised-learning"><i class="fa fa-check"></i><b>7.3</b> Supervised learning</a><ul>
<li class="chapter" data-level="7.3.1" data-path="machine-learning-concepts.html"><a href="machine-learning-concepts.html#classification"><i class="fa fa-check"></i><b>7.3.1</b> Classification</a></li>
<li class="chapter" data-level="7.3.2" data-path="machine-learning-concepts.html"><a href="machine-learning-concepts.html#regression"><i class="fa fa-check"></i><b>7.3.2</b> Regression</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="machine-learning-concepts.html"><a href="machine-learning-concepts.html#unsupervised-learning"><i class="fa fa-check"></i><b>7.4</b> Unsupervised learning</a><ul>
<li class="chapter" data-level="7.4.1" data-path="machine-learning-concepts.html"><a href="machine-learning-concepts.html#clustering"><i class="fa fa-check"></i><b>7.4.1</b> Clustering</a></li>
<li class="chapter" data-level="7.4.2" data-path="machine-learning-concepts.html"><a href="machine-learning-concepts.html#density-estimation"><i class="fa fa-check"></i><b>7.4.2</b> Density estimation</a></li>
<li class="chapter" data-level="7.4.3" data-path="machine-learning-concepts.html"><a href="machine-learning-concepts.html#visualization"><i class="fa fa-check"></i><b>7.4.3</b> Visualization</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Knowledge Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="docker" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Docker</h1>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">4.1</span> Introduction</h2>
<p>Nowadays, almost all companies and scientific labs which work with data are also becoming software producers. In some cases, the main reason for this software development is to publish effective scientific work. In other cases, its final aim might be just putting together a set of related functions that work for a similar final objective. However, in both cases, the final software product becomes highly shareable.</p>
<p>This characteristic, the shareability of the software produced, might seem very straightforward but in reality, it can turn into a scaring daunting task to be solved. Why? Because of the heterogeneity of all different platforms, operating systems, dependencies, versioning and so on that our software product makes use of. Please, be aware that prior to its first release, our software product might have been tested in a limited number of PC stations with determined characteristics that can be extremely different from any other potential user's PC station around the world.</p>
<p>All these reasons make <a href="https://www.docker.com/">Docker Platform</a> really interesting and useful for both software producers and consumers.</p>
</div>
<div id="what-is-docker" class="section level2">
<h2><span class="header-section-number">4.2</span> What is docker?</h2>
<p><a href="https://www.docker.com/">Docker</a> is a software platform created in 2013 by <a href="https://en.wikipedia.org/wiki/Docker,_Inc.">Docker, Inc.</a> which its main objective is to <em>build, share, and run any app anywhere</em>, independently of the platform and environment where it is executed.</p>
<p>But what does this definition mean? It means that you admiringly can forget about dependencies, libraries, compatibility, etc. to make the app run correctly. To some extent, you could think Docker as a <em>black box</em>, as a <strong>snapshot</strong> of the developer's laptop where she or he developt the software you are about to make use of. A snapshot of the precise moment when the developer decided to release the software. Thus, everything you need to run the app is already there, installed and configured inside the Docker object, ready to be used, with no compatibility issues at all.</p>
</div>
<div id="images-and-containers" class="section level2">
<h2><span class="header-section-number">4.3</span> Images and containers</h2>
<p>Working with Docker, there are two main concepts you are going to hear about constantly: images and containers. An <strong>image</strong> is the virtual file or template that contains the whole set of instructions to build a container. An image is the raw Docker file you will directly download from <a href="https://hub.docker.com/">Docker Hub</a> developer's repository to your local. On the other hand, a <strong>container</strong> is the executable object directly generated from the image. A container will be the virtual object that represents the snapshot of the app developer's laptop.</p>
<p>In summary, the image is the virtual file that contains the raw instructions to build the executable app, and the executable app is the container itself.</p>
</div>
<div id="docker-hub" class="section level2">
<h2><span class="header-section-number">4.4</span> Docker Hub</h2>
<p><a href="https://hub.docker.com/">Docker Hub</a> is an online platform that allows creating individual Docker repositories. A Docker repository is a personal account space where you can store one or more versions of the same Docker image, which are represented by tags.</p>
<p>Let us focus on the following image obtained from the <a href="https://hub.docker.com/_/ubuntu?tab=tags">Ubuntu Docker Repository</a>:</p>
<!-- ### Managing a docker object -->
<!-- ### Creating a docker object -->
</div>
<div id="useful-commands" class="section level2">
<h2><span class="header-section-number">4.5</span> Useful Commands</h2>
<p>This page contains a list with some of the most common commands of Docker.</p>
<p>To download a Docker image from Docker Hub:</p>
<pre class="console"><code>$ sudo docker push repository/name:tag</code></pre>
<p>To run the image <em>name:tag</em>. The flag <strong>--rm</strong> indicates to remove the container after stopping the image; whereas the flag <strong>-p</strong> indicates the port on which we want to expose the execution of the image:</p>
<pre class="console"><code>$ sudo docker run --rm -p 8500:80 name:tag</code></pre>
<p>To list all docker images that are available in our local:</p>
<pre class="console"><code>$ sudo docker images</code></pre>
<p>To remove the image <em>image_name</em>:</p>
<pre class="console"><code>$ sudo docker image rm image_name</code></pre>
<p>To remove all orphaned images:</p>
<pre class="console"><code>$ sudo docker rmi $(sudo docker images -f dangling=true -q)</code></pre>
<p>To list all current containers:</p>
<pre class="console"><code>$ sudo docker ps</code></pre>
<p>To list all stopped containers:</p>
<pre class="console"><code>$ sudo docker ps -a </code></pre>
<p>To remove all orphaned containers:</p>
<pre class="console"><code>$ sudo docker rm $(sudo docker ps -a -q)</code></pre>
<p>To enter inside a container in execution:</p>
<pre class="console"><code>$ sudo docker exec -it name_container /bin/sh</code></pre>
<p>To add a user to the docker group (required to avoid using sudo):</p>
<pre class="console"><code>sudo usermod -a -G docker username</code></pre>
<p>To check the user has been correctly added to the docker group:</p>
<pre class="console"><code>grep &#39;^docker:&#39; /etc/group</code></pre>
</div>
<div id="docker-coexp-web-application" class="section level2">
<h2><span class="header-section-number">4.6</span> Docker &amp; CoExp Web Application</h2>
<p>This tutorial contains the instructions to install a local version of the CoExp Webpage by making use of the Docker technology. All the commands shown in this document have been tested in a Ubuntu18.04 machine.</p>
<div id="software-requirements" class="section level3">
<h3><span class="header-section-number">4.6.1</span> Software requirements</h3>
<p>Before downloading the CoExp Docker images, we first need to prepare the environment for the correct execution of Docker.</p>
<p>Thus, let's download/fetch new versions of the packages that are already installed in our Linux machine (all these commands have been tested in a Ubuntu18.04 machine):</p>
<pre class="console"><code>$ sudo apt update
$ sudo apt upgrade</code></pre>
<p><em>curl</em> is a tool used to transfer data. We will make use of it later when we download the CoExp Docker images. To install <em>curl</em> in the machine:</p>
<pre class="console"><code>$ sudo apt install curl
$ sudo curl --version</code></pre>
<p>Now, we are ready to install the Docker technology in the machine. So, let's download it:</p>
<pre class="console"><code>$ sudo apt install docker.io</code></pre>
<p>Once the Docker installation has finished, we can enable and start it. The last instruction <em>sudo docker --version</em> will return the current Docker version installed:</p>
<pre class="console"><code>$ sudo systemctl start docker
$ sudo systemctl enable docker
$ sudo docker --version</code></pre>
<p>Finally, we need to install Docker-compose (more info <a href="https://www.digitalocean.com/community/tutorials/how-to-install-docker-compose-on-ubuntu-18-04">here</a>). Docker-compose is a brach of the Docker technology, which allows communicating different Docker images between them:</p>
<pre class="console"><code>$ sudo curl -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose
$ sudo chmod +x /usr/local/bin/docker-compose
$ docker-compose --version</code></pre>
</div>
<div id="download-docker-images-of-coexp" class="section level3">
<h3><span class="header-section-number">4.6.2</span> Download Docker images of CoExp</h3>
<p>If everything has gone as expected, the system should now be ready to download the two CoExp Docker images. There are two different images because one contains the user interface (UI) of the CoExp webpage, and the other one contains the backend of the CoExp WebPage (author <a href="https://github.com/juanbot/CoExpNets">Juan Botia</a>).</p>
<p>In terms of the back-end of the CoExp Webpage, there are two different docker images available:</p>
<ol style="list-style-type: decimal">
<li>Complete version: this docker image contains the totality of all CoExp networks, and it is about ~4.5GB of size.</li>
<li>Lite version: this smaller docker image contains only the ROSMAP co-expression network. This image is about ~1.3GB of size.</li>
</ol>
<p>Depending on which image you are interested in, the commands to execute are:</p>
<p>To download the complete version:</p>
<pre class="console"><code>$ sudo docker pull soniaruiz/coexp:r</code></pre>
<p>To download the lite version:</p>
<pre class="console"><code>$ sudo docker pull soniaruiz/coexp:r-lite</code></pre>
</div>
<div id="use-docker-composer-to-build-the-images" class="section level3">
<h3><span class="header-section-number">4.6.3</span> Use Docker-Composer to build the images</h3>
<p>The next step is to make the comunication between the two docker images possible. For that purpose, we need to download this <a href="https://github.com/SoniaRuiz/IPDGC/blob/master/complete/docker-compose.yml"><strong>docker-compose.yml</strong></a> file (in case you have opted by the complete backend version), or this <a href="https://github.com/SoniaRuiz/IPDGC/blob/master/lite/docker-compose.yml"><strong>docker-compose.yml</strong></a> file (if you have opted by the lite version). In any case, this file will make possible the correct communication between the two Docker images we downloaded in the previous step.</p>
<p>Additionally, the location of the downloaded <strong>docker-compose.yml</strong> file is not really important, but we recommend to place it in your <strong>Home</strong> folder (in case you are using a Linux machine).</p>
<p>Once the download has finished, use the following command to execute the <strong>docker-compose</strong> file and, therefore, to run your own Docker CoExp webpage:</p>
<pre class="console"><code>$ sudo docker-compose up</code></pre>
<p>Finally, to test whether the execution has been correct, please type the following URL into the address bar:</p>
<pre class="console"><code>http://localhost:8088/</code></pre>
<p>If everything has gone as expected, you should now be able to visualize your dockerized version of the CoExp webpage in your browser. Congratulations!</p>
</div>
<div id="juans-tutorial" class="section level3">
<h3><span class="header-section-number">4.6.4</span> Juan's tutorial</h3>
<p>Suppose we want to generate local TOM (Topology Overlap Measure) modules from a specific network so we may, independently from the CoExpNets Web application or within the application, plot or use networks in graph mode. We can do it by creating their module TOMs and get the corresponding graph in terms of a connectivity matrix we can plot.</p>
<p>We will exemplify this by using the frontal cortex network from GTEx V6 package as follows.</p>
<p>We launch all package stuff so we can start working with those networks.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(CoExpNets)
<span class="kw">library</span>(CoExpGTEx)
CoExpGTEx<span class="op">::</span><span class="kw">initDb</span>()

netf =<span class="st"> </span><span class="kw">getNetworkFromTissue</span>(<span class="dt">tissue=</span><span class="st">&quot;FCortex&quot;</span>,
                            <span class="dt">which.on=</span><span class="st">&quot;gtexv6&quot;</span>,
                            <span class="dt">only.file=</span>T)</code></pre></div>
<p>And now (we assume it is not generated yet) create the module-TOMs for the Frontal Cortex Network as follows. As we see,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">netf</code></pre></div>
<p>the beta value for that network is 9, it is in the name between the tissue and the <code>.it.50.rds</code> token in the file name.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getModuleTOMs</span>(<span class="dt">tissue=</span><span class="st">&quot;FCortex&quot;</span>,
              <span class="dt">beta=</span><span class="dv">9</span>,
              <span class="dt">out.path=</span><span class="st">&quot;~/tmp/mytoms/&quot;</span>,
              <span class="dt">which.one=</span><span class="st">&quot;gtexv6&quot;</span>)</code></pre></div>
<p>And we can see all module-TOMs created now at the <code>~/tmp/mytoms/</code> folder</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list.files</span>(<span class="st">&quot;~/tmp/mytoms/&quot;</span>,<span class="dt">full.names =</span> F,<span class="dt">recursive =</span> F)</code></pre></div>
<p>And now we can get any module's connectivity matrix so we can represent a graph for the TOM</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getModuleTOMGraph</span>(<span class="dt">tissue=</span><span class="st">&quot;FCortex&quot;</span>,
                  <span class="dt">which.one=</span><span class="st">&quot;gtexv6&quot;</span>,
                  <span class="dt">module=</span><span class="st">&quot;black&quot;</span>,
                  <span class="dt">topgenes=</span><span class="dv">10</span>,
                  <span class="dt">out.path=</span><span class="st">&quot;~/tmp/mytoms/&quot;</span>)</code></pre></div>
<p>And there you have it.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="aws.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="github.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["knowledge-book.pdf", "knowledge-book.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
